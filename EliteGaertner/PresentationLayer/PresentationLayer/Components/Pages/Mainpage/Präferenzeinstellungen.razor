@page "/prÃ¤ferenzeinstellungen"
@using PresentationLayer.State
@inject UserRegistrationState RegistrationState
@inject NavigationManager Nav


<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<div class="register-page-container">
    <div class="login-center">

        <div class="register-card">

            <div class="logo-container">
                <img src="pictures/EliteGÃ¤rtner_logo.png" alt="EliteGÃ¤rtner Logo" class="app-logo" />
                @* Ã¼ber die CSS-Klasse elitegaertner-title definiert *@
                <h2 class="elitegaertner-title mt-2">EliteGÃ¤rtner.</h2>
            </div>
            
            <h3 class="register-title">PrÃ¤ferenzeinstellungen</h3>
            
            <h4 class="tag-headline">GemÃ¼se</h4>
            <div class="tag-grid">
                @foreach (var tag in _gemueseTags)
                {
                    <div class="tag app-tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
                         @onclick="() => ToggleTag(tag.Name)">
                        <span>@tag.Icon</span>
                        <span>@tag.Name</span>
                    </div>
                }
            </div>

            <h4 class="tag-headline">Obst</h4>
            <div class="tag-grid">
                @foreach (var tag in _obstTags)
                {
                    <div class="tag app-tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
                         @onclick="() => ToggleTag(tag.Name)">
                        <span>@tag.Icon</span>
                        <span>@tag.Name</span>
                    </div>
                }
            </div>

            <button class="app-button primary-button weiter-button"
                    disabled="@( !RegistrationState.SelectedTags.Any() )"
                    @onclick="Speichern">
                Speichern
            </button>
            
            @if ( !RegistrationState.SelectedTags.Any() )
            {
                <p class="disabled-hint">Bitte mindestens ein Tag auswÃ¤hlen.</p>
            }

        </div>

    </div>
</div>

@code {
    
    //TODO Interessen speichern fehlt
    public record TagItem(string Name, string Icon);

    List<TagItem> _gemueseTags = new()
    {
        new("Auberginen", "ğŸ†"),
        new("Gurken", "ğŸ¥’"),
        new("Tomaten", "ğŸ…"),
        new("KÃ¼rbisse", "ğŸƒ"),
        new("Paprika", "ğŸŒ¶ï¸"),
        new("Zucchini", "ğŸ¥’"),
        new("Kartoffeln", "ğŸ¥”"),
        new("Karotten", "ğŸ¥•"),
        new("Salate", "ğŸ¥¬"),
        new("Zwiebeln", "ğŸ§…"),
        new ("Bohnen", "ğŸŒ¿"),
        new ("Spinat", "ğŸƒ"),
        new ("Radieschen", "ğŸŒ±"),
        new ("Brokkoli", "ğŸ¥¦"),
        new ("Mais", "ğŸŒ½"),
    };

    List<TagItem> _obstTags = new()
    {
        new("Melonen", "ğŸ‰"),
        new("Ã„pfel", "ğŸ"),
        new("Birnen", "ğŸ"),
        new("Pfirsiche", "ğŸ‘"),
        new("Kirschen", "ğŸ’"),
        new("Erdbeeren", "ğŸ“"),
        new("Trauben", "ğŸ‡")
    };

    void ToggleTag(string tag)
    {
        if (!RegistrationState.SelectedTags.Add(tag))
            RegistrationState.SelectedTags.Remove(tag);
    }

    void Speichern()
    {
        Console.WriteLine("AusgewÃ¤hlte Tags: " + string.Join(", ", RegistrationState.SelectedTags));
        Nav.NavigateTo("/startseite");
    }
}