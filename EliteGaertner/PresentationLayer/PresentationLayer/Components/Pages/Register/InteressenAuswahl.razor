@page "/registrierung/interessen"
@using PresentationLayer.State
@using PresentationLayer.Shared
@inject UserRegistrationState RegistrationState
@inject NavigationManager Nav


@* WICHTIG: Beide Schriftarten laden, da Patrick Hand für den allgemeinen Text und Playfair Display für den EliteGärtner-Titel verwendet wird *@
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<div class="register-page-container">
    <div class="login-center">

        <div class="register-card">

            <div class="logo-container">
                <img src="pictures/EliteGärtner_logo.png" alt="EliteGärtner Logo" class="app-logo" />
                @* Style entfernt und über die CSS-Klasse elitegaertner-title definiert *@
                <h2 class="elitegaertner-title mt-2">EliteGärtner.</h2>
            </div>
            
            <h3 class="register-title">Wähle dein Interessensprofil</h3>
            
            <h4 class="tag-headline">Gemüse</h4>
            <div class="tag-grid">
                @foreach (var tag in TagCatalog.Gemuese)
                {
                    <div class="tag app-tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
                         @onclick="() => ToggleTag(tag.Name)">
                        <span>@tag.Icon</span>
                        <span>@tag.Name</span>
                    </div>
                }
            </div>

            <h4 class="tag-headline">Obst</h4>
            <div class="tag-grid">
                @foreach (var tag in TagCatalog.Obst)
                {
                    <div class="tag app-tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
                         @onclick="() => ToggleTag(tag.Name)">
                        <span>@tag.Icon</span>
                        <span>@tag.Name</span>
                    </div>
                }
            </div>

            <button class="app-button primary-button weiter-button"
                    disabled="@( !RegistrationState.SelectedTags.Any() )"
                    @onclick="Speichern">
                Speichern
            </button>
            
            @if ( !RegistrationState.SelectedTags.Any() )
            {
                <p class="disabled-hint">Bitte mindestens ein Tag auswählen.</p>
            }

        </div>

    </div>
</div>

@code {
    void ToggleTag(string tag)
    {
        if (!RegistrationState.SelectedTags.Add(tag))
            RegistrationState.SelectedTags.Remove(tag);
    }

    void Speichern()
    {
        Console.WriteLine("Ausgewählte Tags: " + string.Join(", ", RegistrationState.SelectedTags));
        Nav.NavigateTo("/registrierung/profilerstellung");
    }
}