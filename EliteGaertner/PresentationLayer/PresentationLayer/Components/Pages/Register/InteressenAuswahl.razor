@page "/registrierung/interessen"
@inject UserRegistrationState RegistrationState
@inject NavigationManager Nav
@rendermode InteractiveServer

<h2>WÃ¤hle dein Interessensprofil</h2>

<h3>GemÃ¼se</h3>
<div class="tag-grid">
    @foreach (var tag in GemueseTags)
    {
        <div class="tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
             @onclick="() => ToggleTag(tag.Name)">
            <span>@tag.Icon</span>
            <span>@tag.Name</span>
        </div>
    }
</div>

<h3>Obst</h3>
<div class="tag-grid">
    @foreach (var tag in ObstTags)
    {
        <div class="tag @(RegistrationState.SelectedTags.Contains(tag.Name) ? "selected" : "")"
             @onclick="() => ToggleTag(tag.Name)">
            <span>@tag.Icon</span>
            <span>@tag.Name</span>
        </div>
    }
</div>

<button class="weiter-button"
        disabled="@( !RegistrationState.SelectedTags.Any() )"
        @onclick="Speichern">
    Speichern
</button>

@code {
    public record TagItem(string Name, string Icon);

    List<TagItem> GemueseTags = new()
    {
        new("Auberginen", "ğŸ†"),
        new("Gurken", "ğŸ¥’"),
        new("Tomaten", "ğŸ…"),
        new("KÃ¼rbisse", "ğŸƒ"),
        new("Paprika", "ğŸŒ¶ï¸"),
        new("Zucchini", "ğŸ¥’"),
        new("Kartoffeln", "ğŸ¥”"),
        new("Karotten", "ğŸ¥•"),
        new("Salate", "ğŸ¥¬"),
        new("Zwiebeln", "ğŸ§…")
    };

    List<TagItem> ObstTags = new()
    {
        new("Melonen", "ğŸ‰"),
        new("Ã„pfel", "ğŸ"),
        new("Birnen", "ğŸ"),
        new("Pflaumen", "ğŸ‘"),
        new("Kirschen", "ğŸ’"),
        new("Erdbeeren", "ğŸ“"),
        new("Trauben", "ğŸ‡")
    };

    void ToggleTag(string tag)
    {
        if (!RegistrationState.SelectedTags.Add(tag))
            RegistrationState.SelectedTags.Remove(tag);
    }

    void Speichern()
    {
        Console.WriteLine("Kontaktdaten:");
        if (RegistrationState.ShareEmail) Console.WriteLine($"Email: {RegistrationState.Email}");
        if (RegistrationState.ShareTelephone) Console.WriteLine($"Telefon: {RegistrationState.Telephone}");

        Console.WriteLine("AusgewÃ¤hlte Tags: " + string.Join(", ", RegistrationState.SelectedTags));
        
        Nav.NavigateTo("/registrierung/kontaktdaten", forceLoad: true);
    }
}

<style>
    .tag-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
    }

    .tag {
        display: flex;
        align-items: center;
        gap: 5px;
        padding: 5px 12px;
        border: 1px solid #aaa;
        border-radius: 15px;
        cursor: pointer;
        background-color: #f0f0f0;
        transition: all 0.2s;
    }

    .tag.selected {
        background-color: #8011d1;
        color: white;
        border-color: #8011d1;
    }

    .weiter-button {
        background-color: #8011d1;
        color: white;
        border: none;
        width: 100%;
        padding: 8px 0;
    }

    .weiter-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
</style>

