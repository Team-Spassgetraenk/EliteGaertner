@page "/MatchesTest"
@rendermode InteractiveServer
@inject NavigationManager Nav

<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<div class="mobile-container background-style">
    <header class="top-bar">
        @* Hier wird .icon-wrapper verwendet *@
        <div class="icon-wrapper left" @onclick="GoToRanks">
            <img src="pictures/Rangliste.png" alt="Rangliste" height="40" />
            <span class="icon-label">Rangliste</span>
        </div>

        <h1 class="page-title">Meine Matches</h1>

        @* HIER: Ersetzt durch den klickbaren Menü-Container *@
        <div class="menu-icon-container">
            <span class="menu-icon" @onclick="ToggleLogoutMenu">☰</span>
        </div>
    </header>

    @* HIER: Dropdown-Menü für Logout *@
    @if (showLogout)
    {
    <div class="logout-menu">
        <p @onclick="NavigateToLogout">Logout &lt;</p>
    </div>
    }

    <div class="scroll-content">
        @foreach (var match in Matches)
        {
        <div class="match-card">
            <div class="card-inner">
                <a class="username-link" href="@($"/profil/{match.UsernameUrl}")">
                    <div class="username">@match.UserName</div>
                </a>

                <div class="info-row">
                    <span class="label">Tel:</span> @match.Phone
                </div>
                <div class="info-row">
                    <span class="label">E-Mail:</span> @match.Email
                </div>
            </div>
        </div>
        }
    </div>

    <footer class="bottom-nav">
        <div class="nav-item active" @onclick="GoToMatches">
            <img src="pictures/MatchesIcon.png" alt="Matches" height="40" />
            <span>Matches</span>
        </div>

        <div class="nav-item" @onclick="GoToMainpage">
            <img src="pictures/EliteGärtner_logo.png" alt="EliteGärtner" height="40" />
            <span class="elitegaertner-title mt-2" style="font-weight: 600; font-size: 1.0rem">EliteGärtner.</span>
        </div>

        <div class="nav-item" @onclick="GoToProfile">
            <img src="pictures/Profil_04.png" alt="Profile" height="40" />
            <span>Profil</span>
        </div>
    </footer>
</div>

@code {
// NEU: Logout-Variable
private bool showLogout = false;

public class UserMatch
{
public string UserName { get; set; } = "";
public string Phone { get; set; } = "";
public string Email { get; set; } = "";

// Liefert den Namen ohne '@' für die URL
public string UsernameUrl => UserName.TrimStart('@');
}

private List<UserMatch> Matches = new List<UserMatch>
{
new UserMatch { UserName = "@user_name1", Phone = "+49 12345678901", Email = "max.mustermann@gmail.com" },
new UserMatch { UserName = "@user_name3", Phone = "+49 8415 7563344", Email = "reiner.zufall@gmx.de" },
new UserMatch { UserName = "@user_name4", Phone = "+49 98765432109", Email = "elite.gaertner69@gmail.com" },
new UserMatch { UserName = "@user_name5", Phone = "+49 34523045646", Email = "6sieben.atze3@web.de" },
};

// NEU: Logout-Methoden
private void ToggleLogoutMenu()
{
showLogout = !showLogout;
}

private void NavigateToLogout()
{
Nav.NavigateTo("/", forceLoad: true);
}

private void GoToRanks()
{
Nav.NavigateTo("/RanglisteTest", forceLoad: true);
}

private void GoToMatches()
{
Nav.NavigateTo("/MatchesTest", forceLoad: true);
}

private void GoToMainpage()
{
Nav.NavigateTo("/startseite", forceLoad: true);
}

private void GoToProfile()
{
Nav.NavigateTo("/ProfilTest", forceLoad: true);
}
}


<style>

    /* Wichtig, damit das Logout-Menü korrekt positioniert werden kann */
    .mobile-container {
        font-family: 'Patrick Hand', cursive, sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
        max-width: 100%;
        background-color: white;
        overflow: hidden;
        position: relative; /* Wichtig für relative Positionierung des Logout-Menüs */
    }

    .background-style {
        background-image: url('pictures/LightIconBackground.jpeg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        width: 100%;
        min-height: 100vh;
        font-family: 'Patrick Hand', cursive, sans-serif;
        padding-top: 1px;
    }

    /* --- Header-Bar (Rangliste und Menü) --- */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        border-bottom: 3px solid #000;
        background-color: #fff;
        z-index: 10;
        box-shadow: 0 4px 0 0 #000;
    }

    .page-title {
        font-size: 1.8rem;
        margin: 0;
        font-weight: bold;
        color: black;
    }

    .icon-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        width: 60px;
        /* NEU: Transition hinzufügen */
        transition: transform 0.2s;
    }

    /* NEU: Highlight-Effekt beim Hovern */
    .icon-wrapper:hover {
        transform: scale(1.05);
    }

    .icon-label {
        font-size: 0.8rem;
        line-height: 1;
        color: black;
    }

    /* Menü-Icon-Container (Rechts oben) */
    .menu-icon-container {
        cursor: pointer;
        width: 60px; /* Platzhalterbreite, um Links zu zentrieren */
        display: flex;
        justify-content: flex-end;
        align-items: center;
    }

    .menu-icon {
        font-size: 30px;
        line-height: 1;
        color: #000;
        padding-right: 5px; /* Etwas Abstand vom Rand */
    }

    /* --- Logout-Menü (Dropdown) --- */
    .logout-menu {
        position: absolute;
        top: 60px;
        right: 15px;
        width: 150px;
        background-color: #fff;
        /* Mache das Menü auch zur kleinen Comic-Karte */
        border: 3px solid #000;
        border-radius: 8px;
        box-shadow: 3px 3px 0 0 #000;
        z-index: 20;
        padding: 5px 0;
    }

    .logout-menu p {
        padding: 5px 10px;
        margin: 0;
        cursor: pointer;
        font-size: 16px;
        text-align: right;
    }

    .logout-menu p:hover {
        background-color: #eee;
    }


    .scroll-content {
        flex: 1;
        overflow-y: auto;
        padding: 10px 20px;
        scrollbar-width: thin;
    }

    .match-card {
        background-color: #b042ff;
        border-radius: 15px;
        padding: 5px;
        margin-bottom: 20px;
        box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        border: 2px solid rgba(255,255,255,0.5);
    }

    .card-inner {
        padding: 10px 15px;
        color: white;
        font-size: 1.2rem;
        line-height: 1.4;
    }

    .username-link {
        text-decoration: none; /* Entfernt die Unterstreichung vom Link */
        color: white;
        display: block;
        cursor: pointer;
    }

    .username-link:hover {
        opacity: 0.8;
    }

    .username {
        font-size: 1.5rem;
        margin-bottom: 5px;
        display: block;
        font-weight: bold;
    }

    .info-row {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .label {
        margin-right: 5px;
    }

    .bottom-nav {
        display: flex;
        justify-content: space-around;
        padding: 10px 0 20px 0;
        background: white;
        border-top: 3px solid #000;
        z-index: 10;
        box-shadow: 0 -4px 0 0 #000;
        flex-shrink: 0;
    }

    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        font-size: 0.9rem;
        width: 80px;
        text-align: center;
        color: black;
        transition: transform 0.2s;
    }

    .nav-icon {
        font-size: 2rem;
        margin-bottom: 5px;
    }

    .nav-item:hover {
        transform: scale(1.05);
    }
</style>